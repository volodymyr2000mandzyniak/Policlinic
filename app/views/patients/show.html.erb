<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">

      <div class="card mb-4 shadow-sm">
        <div class="row g-0">
          <div class="col-md-4 d-flex align-items-center justify-content-center bg-light p-3">
            <%= image_tag("https://randomuser.me/api/portraits/men/#{rand(1..80)}.jpg", class: "img-fluid rounded-circle", alt: "Patient Avatar", style: "width: 150px; height: 150px; object-fit: cover;") %>
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h4 class="card-title mb-3">üë§ –í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å</h4>

              <p><strong>–Ü–º'—è:</strong> <%= @patient.first_name %></p>
              <p><strong>–ü—Ä—ñ–∑–≤–∏—â–µ:</strong> <%= @patient.last_name %></p>
              <p><strong>Email:</strong> <%= @patient.email %></p>
              <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <%= @patient.phone %></p>
              <p><strong>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è:</strong> <%= @patient.date_of_birth.strftime("%d.%m.%Y") if @patient.date_of_birth %></p>
              <p><strong>–ê–¥—Ä–µ—Å–∞:</strong> <%= @patient.address.presence || "‚Äî" %></p>

              <div class="mt-4 d-flex gap-2">
                <%= link_to "‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å", edit_patient_registration_path, class: "btn btn-outline-success btn-sm" %>
                <%= button_to "üö™ –í–∏–π—Ç–∏", destroy_patient_session_path, method: :delete, class: "btn btn-outline-danger btn-sm" %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h4 class="mb-3">üìã –í–∞—à—ñ –∑–∞–ø–∏—Å–∏</h4>

      <% if @appointments.any? %>
        <div class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
              <tr>
                <th>üë®‚Äç‚öïÔ∏è –õ—ñ–∫–∞—Ä</th>
                <th>üìÇ –ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
                <th>üìå –°—Ç–∞—Ç—É—Å</th>
                <th>üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è</th>
                <th>üìÖ –î–∞—Ç–∞</th>
              </tr>
            </thead>
            <tbody>
              <% @appointments.each do |appt| %>
                <tr>
                  <td>
                    <div class="d-flex flex-column">
                      <strong><%= appt.doctor.full_name %></strong>
                      <%= link_to "–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –ª—ñ–∫–∞—Ä—è", doctor_path(appt.doctor), class: "btn btn-sm btn-outline-primary mt-1" %>
                    </div>
                  </td>
                  <td><%= appt.doctor.category&.title %></td>
                  <td>
                    <% if appt.status == "open" %>
                      <span class="badge bg-warning text-dark">–û—á—ñ–∫—É—î</span>
                    <% else %>
                      <span class="badge bg-success">–ó–∞–∫—Ä–∏—Ç–æ</span>
                    <% end %>
                  </td>
                  <td>
                    <% if appt.recommendation.present? %>
                      <%= link_to "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏", appointment_path(appt), class: "btn btn-sm btn-outline-primary" %>
                    <% else %>
                      ‚Äî
                    <% end %>
                  </td>
                  <td><%= l(appt.created_at, format: :short) %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <p class="text-muted">–£ –≤–∞—Å –ø–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤.</p>
      <% end %>

    </div>
  </div>
</div>
