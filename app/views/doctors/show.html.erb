<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
<% if patient_signed_in? %>
  <%= button_to "–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –ø—Ä–∏–π–æ–º", appointments_path(doctor_id: @doctor.id), method: :post, class: "btn btn-success" %>
<% end %>

      <div class="card shadow-sm mb-4">
        <div class="row g-0">
          <div class="col-md-4 bg-light d-flex align-items-center justify-content-center p-3">
            <%= image_tag("https://randomuser.me/api/portraits/men/#{rand(1..80)}.jpg", class: "img-fluid rounded-circle shadow-sm", alt: "Doctor Avatar", style: "width: 150px; height: 150px; object-fit: cover;") %>
          </div>
          <div class="col-md-8">
            <div class="card-body">

              <h4 class="card-title mb-3">üë®‚Äç‚öïÔ∏è –ü—Ä–æ—Ñ—ñ–ª—å –ª—ñ–∫–∞—Ä—è</h4>

              <% if doctor_signed_in? && current_doctor == @doctor %>
                <% if @doctor.approved? %>
                  <div class="alert alert-success">‚úÖ –í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—î—é</div>
                <% else %>
                  <div class="alert alert-warning">üïí –í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å —â–µ –Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ. –ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–æ–∑–≥–ª—è–¥—ñ.</div>
                <% end %>
              <% end %>

              <% if patient_signed_in? && @doctor.approved? && @doctor.can_accept_new_appointment? %>
                <%= button_to "üìÖ –ó–∞–ø–∏—Å–∞—Ç–∏—Å—å –Ω–∞ –ø—Ä–∏–π–æ–º", appointments_path(doctor_id: @doctor.id), method: :post, class: "btn btn-primary mb-3" %>
              <% end %>

              <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>–Ü–º'—è:</strong> <%= @doctor.first_name %></li>
                <li class="list-group-item"><strong>–ü—Ä—ñ–∑–≤–∏—â–µ:</strong> <%= @doctor.last_name %></li>
                <li class="list-group-item"><strong>Email:</strong> <%= @doctor.email %></li>
                <li class="list-group-item"><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <%= @doctor.phone %></li>
                <li class="list-group-item"><strong>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è:</strong> <%= @doctor.date_of_birth %></li>
                <li class="list-group-item"><strong>–ê–¥—Ä–µ—Å–∞:</strong> <%= @doctor.address %></li>
                <% if @doctor.category %>
                  <li class="list-group-item"><strong>–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ—Å—Ç—å:</strong> <%= @doctor.category.title %></li>
                <% end %>
              </ul>

              <% if doctor_signed_in? && current_doctor == @doctor %>
                <div class="mt-4 d-flex gap-2">
                  <%= link_to "‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å", edit_doctor_registration_path, class: "btn btn-outline-success btn-sm" %>
                  <%= button_to "üö™ –í–∏–π—Ç–∏", destroy_doctor_session_path, method: :delete, class: "btn btn-outline-danger btn-sm" %>
                </div>
              <% end %>

            </div>
          </div>
        </div>
      </div>

      <% if doctor_signed_in? && current_doctor == @doctor %>
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title mb-3">üîé –ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–ø–∏—Å—ñ–≤</h5>
      <%= link_to "üìÇ –í—ñ–¥–∫—Ä–∏—Ç—ñ –∑–∞–ø–∏—Å–∏", appointments_path, class: "btn btn-outline-primary mb-2 me-2" %>
      <%= link_to "‚úÖ –ó–∞–∫—Ä–∏—Ç—ñ –∑–∞–ø–∏—Å–∏", closed_appointments_path, class: "btn btn-outline-success mb-2" %>
    </div>
  </div>
<% end %>


      <% if doctor_signed_in? && current_doctor == @doctor %>
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title mb-3">üìù –ó–∞–ø–∏—Å–∏ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤</h5>

            <% if @appointments.any? %>
            <table class="table table-bordered table-hover">
  <thead class="table-light">
    <tr>
      <th>üë§ –ü–∞—Ü—ñ—î–Ω—Ç</th>
      <th>üìå –°—Ç–∞—Ç—É—Å</th>
      <th>üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è</th>
      <th>üìÖ –î–∞—Ç–∞</th>
      <th>‚úçÔ∏è –î—ñ—è</th>
    </tr>
  </thead>
  <tbody>
    <% @appointments.each do |appt| %>
      <tr>
        <td><%= appt.patient.full_name %></td>
        <td>
          <% if appt.status == "open" %>
            <span class="badge bg-warning text-dark">–û—á—ñ–∫—É—î</span>
          <% else %>
            <span class="badge bg-success">–ó–∞–∫—Ä–∏—Ç–æ</span>
          <% end %>
        </td>
        <td><%= appt.recommendation.presence || "‚Äî" %></td>
        <td><%= l(appt.created_at, format: :short) %></td>
        <td>
          <% if appt.open? %>
            <%= link_to "–î–æ–¥–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é", edit_appointment_path(appt), class: "btn btn-sm btn-outline-primary" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

            <% else %>
              <p>–ó–∞–ø–∏—Å—ñ–≤ –ø–æ–∫–∏ —â–æ –Ω–µ–º–∞—î.</p>
            <% end %>
          </div>
        </div>
      <% end %>

    </div>
  </div>
</div>
